<?xml version="1.0" encoding="UTF-8"?>
<project name="pratilipi" default='all' basedir="." >

	<target name="all" depends="clean, minify">
		
		<copy todir="war/polymer" flatten="true">
			<fileset dir="claymus/src/com/claymus/commons" includes="**/*.html"/>
			<fileset dir="claymus/src/com/claymus/pagecontent" includes="**/*.html"/>
			<fileset dir="src/com/pratilipi/pagecontent" includes="**/*.html"/>
		</copy>
	
		<copy todir="war/theme.pratilipi.min">
			<fileset dir="war/theme.pratilipi/" excludes="*.css, *.js"/>
		</copy>
		
	</target>
	
	<target name="clean">
		<delete dir="war/polymer"/>
	    <delete dir="war/theme.pratilipi.min"/>
	</target>

	<target name="minify">

		<!-- Combine CSS files -->
		<concat destfile="war/theme.pratilipi.min/style.css">
	        <filelist dir="claymus/war/theme.default" files="style.css, style.polymer.css" />
	    </concat>
		
		<!-- Minify CSS -->
		<java jar="war/WEB-INF/lib/yuicompressor-2.4.8.jar" fork="true">
			<arg value="war/theme.pratilipi.min/style.css"/>
			<arg value="-o"/>
			<arg value="war/theme.pratilipi.min/style.min.css"/>
		</java>
		
		<!-- Combine Basicmode CSS files -->
		<concat destfile="war/theme.pratilipi.min/style.basicmode.css">
	        <filelist dir="claymus/war/theme.default" files="style.css" />
	        <filelist dir="war/theme.pratilipi" files="style.basicmode.css" />
	    </concat>
		
		<!-- Minify Basicmode CSS -->
		<java jar="war/WEB-INF/lib/yuicompressor-2.4.8.jar" fork="true">
			<arg value="war/theme.pratilipi.min/style.basicmode.css"/>
			<arg value="-o"/>
			<arg value="war/theme.pratilipi.min/style.basicmode.min.css"/>
		</java>
		
		<!-- Combine JS files -->
		<concat destfile="war/theme.pratilipi.min/script.js">
	        <filelist dir="claymus/war/theme.default" files="script.js" />
	        <filelist dir="war/theme.pratilipi" files="script.js" />
	    </concat>
		
		<!-- Minify JS -->
		<java jar="war/WEB-INF/lib/yuicompressor-2.4.8.jar" fork="true">
			<arg value="war/theme.pratilipi.min/script.js"/>
			<arg value="-o"/>
			<arg value="war/theme.pratilipi.min/script.min.js"/>
		</java>
		
		<!-- Combine BasicMode JS files -->
		<concat destfile="war/theme.pratilipi.min/script.basicmode.js">
	        <filelist dir="claymus/war/theme.default" files="script.js, script.basicmode.js" />
	        <filelist dir="war/theme.pratilipi" files="script.js, script.basicmode.js" />
	    </concat>
		
		<!-- Minify BasicMode JS -->
		<java jar="war/WEB-INF/lib/yuicompressor-2.4.8.jar" fork="true">
			<arg value="war/theme.pratilipi.min/script.basicmode.js"/>
			<arg value="-o"/>
			<arg value="war/theme.pratilipi.min/script.basicmode.min.js"/>
		</java>
		
	</target>
	
</project>